version: "3.8"

services: 
    chat-service:
        build:
         context: .
         dockerfile: Dockerfile
        container_name: chat-service-new
        ports: 
         - "5000:8080"
        environment:
         - ASPNETCORE_ENVIRONMENT=Development
         - ConnectionStrings__DefaultConnection=server=mysql;user=root;password=jelszo;database=chat-service
        depends_on:
         - mysql
        networks:
         - backend-network

    mysql:
        image: mysql:8.0
        container_name: mysql
        environment:
         MYSQL_ROOT_PASSWORD: jelszo
         MYSQL_DATABASE: chatservice
        ports:
         - "4000:3306"
        volumes:
         - mysql-data:/var/lib/mysql
         - ./mysql-init:/docker-entrypoint-initdb.d
        networks:
         - backend-network

networks:
 backend-network:
 
volumes:
 mysql-data:
     
        
